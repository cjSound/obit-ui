(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{332:function(e,t,a){"use strict";var n=a(330),r=a(66),o=a(67),s=(a(331),a(343)),i=(a(335),a(329),a(336)),c=a.n(i),u=a(350),p=a.n(u),l=a(337),d=p.a.create({timeout:6e4,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});d.interceptors.request.use((function(e){e.isFile&&(e.headers["Content-Type"]="multipart/form-data"),void 0!==e.type&&"download"==e.type&&(e.responseType="blob"),e.params&&(e.data=Object(n.a)({},e.data,e.params));var t=l.util.cookie.get("user");if(t){var a=JSON.parse(t);a&&a.accessToken&&(e.headers.Authorization=a.accessToken,e.headers.UserId=a.userId)}return e.headers.SystemType="manager","post"!==e.method&&"put"!==e.method||(e.headers["Content-Type"]="application/json"),e}),(function(e){Promise.reject(e)})),d.interceptors.response.use((function(e){if(200===e.status){var t=e.data;if("0004"===t.code){var a=e.config;return new Promise((function(e){var t=l.util.cookie.get("user"),a=JSON.parse(t),n={userId:a.userId,refleshToken:a.refleshToken};b.methods.reflesh(n).then((function(t){a.accessToken=t.accessToken,l.util.cookie.set("user",a),e()}))})).then((function(){return d(a)}))}if("0005"!==t.code)return-1!==e.headers["content-type"].indexOf("octet-stream")?e:e.data;c()({type:"error",message:t.errorMsg}),b.router.push({path:"/login"}),Promise.reject()}else c()({type:"error",message:e.data.errorMsg}),Promise.reject()}),(function(e){return Promise.reject(e),{code:"1",errorMsg:"请求异常，请稍后重试"}}));var m=d,h=new function(){return{disposeData:function(e){return"0000"===e.code?e.data:(c()({type:"error",message:e.errorMsg}),Promise.reject())},get:(r=Object(s.a)(regeneratorRuntime.mark((function e(t){var a,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,m({url:t,method:"get",params:a});case 3:return n=e.sent,e.abrupt("return",this.disposeData(n));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),post:(n=Object(s.a)(regeneratorRuntime.mark((function e(t){var a,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,m({url:t,method:"post",data:a});case 3:return n=e.sent,e.abrupt("return",this.disposeData(n));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),tablePost:(a=Object(s.a)(regeneratorRuntime.mark((function e(t){var a,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,m({url:t,method:"post",data:a});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),upload:(t=Object(s.a)(regeneratorRuntime.mark((function e(t){var a,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,m({url:t,method:"post",isFile:!0,data:a});case 3:return n=e.sent,e.abrupt("return",this.disposeData(n));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)}),download:(e=Object(s.a)(regeneratorRuntime.mark((function e(t){var a,n,r,o,s,i,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,m({url:t,method:"get",type:"download",responseType:"blob",params:a});case 4:r=e.sent,o=document.createElement("a"),s=new Blob([r.data],{type:n.mimeType||""}),o.href=URL.createObjectURL(s),(i=r.headers.filename)&&(i=decodeURIComponent(i)),o.download=n.fileName||i,o.click();case 12:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})};var e,t,a,n,r},f="http://rap2.taobao.org:38080/app/mock/228700",g={getCommonDictValueList:function(e){return h.get("".concat(f,"/getCommonDictValue"),e)},getCommonDictByParentId:function(e){return h.get("".concat(f,"/getDictByPid"),e)},getCommonDictParents:function(e){return h.get("".concat(f,"/getDictParentListById"),e)},getCommonTest:function(e){return console.log("TCL: getCommonTest -> 原始版本",e),h.get("".concat(f,"manage/codeValue/findByCodeFiled"),e)},getAllOrgTree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.post("".concat(f,"/getAllOrgTree"),e)}};console.log("common",g);var v=function(){function e(t){Object(r.a)(this,e),this.defultApi=t,this.api=h,this.methods=Object(n.a)({},t)}return Object(o.a)(e,[{key:"init",value:function(e,t){this.methods=Object(n.a)({},this.defultApi,e),this.router=t}}]),e}(),b=t.a=new v(g)},344:function(e,t,a){},371:function(e,t,a){"use strict";a(485),a(329);var n=a(486),r=a.n(n),o=(a(25),a(15),a(328),a(488),a(489)),s=a.n(o),i=a(332),c={components:{ElUpload:s.a},props:{drag:{type:Boolean,default:!1},action:{type:String,required:!0},accept:{type:String},success:{type:Function},multiple:{type:Boolean,default:!0},size:{type:Number,default:10},limit:{type:Number,default:10},params:{type:Object},autoUpload:{type:Boolean,default:!0}},data:function(){return{uploadNum:0,uploadSuccessNum:0,loading:""}},methods:{submit:function(){this.$refs.upload.submit()},onExceed:function(){console.log(arguments),this.$message.error("上传数量一次不能超过".concat(this.limit,"个"))},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase();return this.size&&e.size/1024/1024>this.size?(this.$message.error("上传的文件大小不能超过".concat(this.size,"M")),!1):!this.accept||-1!==this.accept.indexOf(t)||(this.$message.error("上传类型只支持".concat(this.accept,"的类型")),!1)},customUpload:function(e){var t=this,a=new FormData;a.append("file",e.file);var n=Object.assign({uploadType:2},this.params);for(var o in n)a.append(o,n[o]);this.uploadNum++,this.loading=r.a.service({lock:!0,text:"文件上传中，请稍后",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i.a.api.upload(this.action,a).then((function(e){t.endLoading(),t.success&&t.success(e)})).catch((function(){t.endLoading()}))},endLoading:function(){this.uploadSuccessNum++,this.uploadNum===this.uploadSuccessNum&&(this.$refs.upload.clearFiles(),this.loading.close())},onChange:function(e){this.autoUpload||console.log("TCL: onChange -> fileobj",e)}}},u=(a(491),a(1)),p=Object(u.a)(c,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{accept:e.accept,action:e.action,"auto-upload":e.autoUpload,"before-upload":e.beforeUpload,drag:e.drag,"http-request":e.customUpload,limit:e.limit,multiple:e.multiple,"on-change":e.onChange,"on-exceed":e.onExceed,"on-success":e.success,"show-file-list":!1}},[e._t("default")],2)}),[],!1,null,null,null);t.a=p.exports},491:function(e,t,a){"use strict";var n=a(344);a.n(n).a},565:function(e,t,a){"use strict";a.r(t);var n={components:{obitUpload:a(371).a},data:function(){return{formData:{imageUrl:""},uploadParams:{uploadType:3},action:"http://rap2.taobao.org:38080/app/mock/228700/upload"}},methods:{success:function(e){this.formData.imageUrl=e.sourceUrl}}},r=a(1),o=Object(r.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"upload"},[t("obitUpload",{attrs:{action:this.action,multiple:!1,params:this.uploadParams,size:5,success:this.success,accept:"jpg, png, jpeg"}},[this.formData.imageUrl?t("img",{staticClass:"avatar",attrs:{src:this.formData.imageUrl,height:"200",width:"300"}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)}),[],!1,null,null,null);t.default=o.exports}}]);